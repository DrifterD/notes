# mysql-learning
记录mysql日志

## 事物
事物标准特性：ACID
1. 原子性（atomicity）
2. 一致性（consistency）
3. 隔离性(isolation)
4. 持久性（durability）

### 隔离级别
隔离性又分为四种类型

* READ UNCOMMITTED(未提交读)
事物中修改的且没有提交的数据其他事物也可以读取，即脏读

* READ COMMITTED(提交读)
一个事物从喀什直到提交之前，所有做的任何修改对其他事物不可见，这个级别有时候会叫做**不可重复读取（nonrepeatable read）**，因为两次执行同样的查询，可能会得到不一样结果

* REPEATABLE READ(可重复读)
理论上，可重复读无法解决幻读问题，但是在mysql中InnoDB和XtraDB通过多版本控制（MVCC multiversion concurrency control）解决幻读问题

* SERIALIAZBLE 最高级别隔离，读取 的每一行数据上都枷锁，避免幻读问题。但是可能导致超时和锁竞争
>注： 幻读：基于插入或者删除场景
不可重复读取：基于update场景

## 索引 结构

### b-tree
大部分索引结构
优点：
* 支持精确查询
* 最左查询
* 范围查询
......

### 哈希索引
hash索引必须精确匹配才能有效
只有memory引擎支持哈希索引

优点：
数据存储紧凑，快

缺点：
只保存哈希值和行索引，不保存字段值
不能按照索引值顺序存储，不能用于排序
只支持等值比较查询
哈希冲突叫多的场景下维护代价较高

innoDB 是否也支持hash索引呢？？

### R-tree 空间索引
MyIsam 支持空间索引

### 全文索引


mysq 索引：
二叉树
红黑树
hash表
b-tree

## 二叉树
节点存储 key-value:key:列的值，value：列所在磁盘的地址
左边小，右边大；从root节点开始
缺点：在某些场景下不适用：递增字段值，索引和全表扫描一样效果

红黑树：
自动平衡
缺点：
数据量大，树深度递增，不可控，io查询可能会很多

b-tree:


b+tree:
优待:顺序访问指针，性能高
存储数据量大


mysql:
*.myi 索引
*.myd 数据
*.frm 表结构

inner db:
*.ibd 表数据和索引存储

聚集索引-叶子节点包含所有的行数据

myISam 引擎 索引 是非聚集，叶子节点存储磁盘地址  

innoDB:
建议整数类型的自增主键：优点：1.性能优化（大小对比，顺序记录，防止树分裂和平衡   ）

联合索引：
1.底层数据结构
